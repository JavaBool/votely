{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 800px;">
    <h1 style="text-align: center;">Election Results</h1>
    <h2 style="text-align: center; color: var(--primary-color); margin-top: 0;">{{ election.title }}</h2>

    <div class="card" style="margin-top: 2rem;">
        <h3
            style="margin-top: 0; margin-bottom: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem;">
            Total Votes Cast: {{ total_votes }}
        </h3>

        {% for candidate, count, rank in results %}
        <div style="margin-bottom: 1.5rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <strong>Rank #{{ rank }}: {{ candidate.name }}</strong>
                <span>{{ count }} votes</span>
            </div>
            <div style="background-color: var(--input-bg); height: 1.5rem; border-radius: 999px; overflow: hidden;">
                {% set percent = (count / total_votes * 100) if total_votes > 0 else 0 %}
                <div
                    style="background-color: var(--primary-color); width: {{ percent }}%; height: 100%; transition: width 1s;">
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div style="text-align: center; margin-top: 2rem;">
        <a href="{{ url_for('public.index') }}" class="btn btn-primary">Back to Home</a>
    </div>
</div>
{% endblock %}